<dataConfig>

  <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
    name="library"
    url="jdbc:mysql://dev2.virtualshelf.net:3306/estantevirtual"
    user="sorl"
    password="RCifH0slt7"
    autoReconnect="true"
  />

  <document>

    <entity name="orders" pk="order_id" dataSource="library"
        query=" 
          select 
            v.order_id, 
            vd.dest_nome as 'buyer_name', 
            v.vendedor as 'seller_id'
          from vendas v 
          left join vendas_detalhes vd on v.order_id = vd.order_id
          where vd.log > DATE_SUB(NOW(), INTERVAL 6 MONTH)
        "
        deltaImportQuery="
          select                                                                               
            v.order_id,                                                                        
            vd.dest_nome as 'buyer_name',                                                      
            v.vendedor as 'seller_id'                                                          
          from vendas v                                                                        
          left join vendas_detalhes vd on v.order_id = vd.order_id                             
          where vd.log > DATE_SUB(NOW(), INTERVAL 6 MONTH)                                     
          and v.order_id = '${dih.delta.id}'"
        deltaQuery="
          SELECT v.order_id
          FROM vendas v
          WHERE v.log &gt; '${dih.last_index_time}'"
      >
    </entity>


  </document>
</dataConfig>
