# This file was generated by OpsWorks
# any manual changes will be removed on the next update.

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

# OpsWorks Layer State
127.0.0.1 localhost localhost.localdomain
127.0.1.1 <%= node[:opsworks][:instance][:hostname] %>.localdomain <%= node[:opsworks][:instance][:hostname] %>
<% seen = [] -%>
<% node[:opsworks][:layers].each do |layer_name, layer_config| -%>
<% layer_config[:instances].each do |instance_name, instance_config| -%>
<% if !seen.include?(instance_name) && instance_config[:private_ip] -%>
<%= Resolv.getaddress(instance_config[:private_ip]) %> <%= instance_name %>
<% if instance_config[:ip] %>
<%= Resolv.getaddress(instance_config[:ip]) %> <%= instance_name %>-ext
<% end %>
<% seen << instance_name %>
<% end -%>
<% end -%>
<% end -%>

# OpsWorks Custom Layer Hosts
<% node[:opsworks][:instance][:layers].each do |layer_name| -%>
    <% next if !node[:opsworks][:layers][layer_name].has_key?(:hosts) -%>
    <% node[:opsworks][:layers][layer_name][:hosts].each do |ip, entry| -%>
        <%= ip %> <%= entry %>
    <% end -%>
<% end -%>
